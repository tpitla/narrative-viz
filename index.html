<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style>
    circle {
        fill: lightblue;
        stroke: black;
    }
</style>

<body onload='init()'>
    <button class="w3-button w3-display-left" onclick="plusDivs(-1)">&#10094;</button>
    <svg>
    </svg>
    
    <button class="w3-button w3-display-right" onclick="plusDivs(+1)">&#10095;</button>
    <script>
        async function init() {
            const data = await d3.csv("https://raw.githubusercontent.com/tpitla/tpitla.github.io/master/cars2017.csv");

            var width = window.screen.availWidth*.80; // Width of the SVG element
            var height = window.screen.availHeight*.80; // Height of the SVG element
            var margin = window.screen.availHeight*.10; // Margin that will be used inside the SVG element

            var x = d3.scaleLog(10).domain([10, 150]).range([0, width]);
            var y = d3.scaleLog(10).domain([10, 150]).range([height, 0])

            d3.select("svg")
                .attr("width", width + 2 * margin)
                .attr("height", height + 2 * margin)
                .append("g")
                .attr("transform", "translate(" + margin + "," + margin + ")")
                .selectAll("circle")
                .data(data)
                .enter()
                .append("circle")
                .attr("cx", function (d, i) { return x(d.AverageCityMPG); })
                .attr("cy", function (d, i) { return y(d.AverageHighwayMPG); })
                .attr("r", function (d, i) { return parseInt(d.EngineCylinders) + 2; })

            d3.select("svg").append("g")
                .attr("transform", "translate(" + margin + "," + margin + ")")
                .call(d3.axisLeft(y).tickValues([10, 20, 50, 100]).tickFormat(d3.format("~s")))

            d3.select("svg").append("g")
                .attr("transform", "translate(" + margin + "," + (height + margin) + ")")
                .call(d3.axisBottom(x).tickValues([10, 20, 50, 100]).tickFormat(d3.format("~s")))

        }
    </script>
</body>

</html>